<div id="user_list">
<h1>Users</h1>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>

</script>
<table class="table">
    <thead class="table-secondary">
        <tr>
            <th>ID</th>
            <th>Name</th>
            {% if admin %} 
            <th>Team Selection</th>
            {%- endif %} 
        </tr>
    </thead>
    <tbody>
        {% for i in range(users|length): %}
            <tr>
                <td>{{users[i].id}}</td>
                <td>{{users[i].name}}</td>
                
                <td>{% if admin %} 
                    <form action="/teams/move/{{users[i].id}}" method="POST" id="move_user_{{users[i].id}}">
                        <label class="form-label" for="teams_select_{{users[i].id}}" ></label>
                    <select id="teams_select_{{users[i].id}}" name="teams_select_{{users[i].id}}" class="form-select"> 
                        <option value="" selected disabled hidden></option>
                        {% for i in range(teams|length): %}
                        <option value="{{teams[i].name}}">{{teams[i].name}}</option> 
                        {% endfor %}
                    </select>
                    
                    <td><button class="btn btn-custom-primary" onclick="document.querySelector('#move_user_{{users[i].id}}').requestSubmit()">Add to Team</button></td>
                    </form>
                    {%- endif %} 
                </td>
                
            </tr>
        {% endfor %}
    </tbody>
</table>
</div>

